name: Docker PoC

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: List
      run: pwd && ls -l
    - name: Install UCC
      run: pip install splunk-add-on-ucc-framework && pip freeze
    - name: Build component lib
      run: pwd && cd packages/my-react-component && npm install && yarn run build
    - name: Yarn setup
      run: pwd && yarn run setup
    - name: Spin up Splunk docker
      run: cd integration_test && ./spin-up-docker-splunk.sh
      
